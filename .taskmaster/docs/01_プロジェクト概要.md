# Biz Clone プロジェクト概要

## プロジェクトについて

**Biz Clone** は、現代的な技術スタックと AI 支援開発手法を使用して構築された**会計システム**です。  
企業の仕訳入力、勘定科目管理、取引先管理などの基本的な会計業務をデジタル化することを目的としています。

**本プロジェクトでは [TaskMaster](https://github.com/taskmaster-ai/taskmaster) を活用した AI 支援開発を実践しており、効率的なタスク管理と品質向上を実現しています。**

## 技術スタック

### フロントエンド

- **Next.js 15.3.3** - React 基盤のフルスタックフレームワーク
- **React 19** - ユーザーインターフェース構築
- **TypeScript** - 型安全な開発
- **Tailwind CSS** - スタイリング
- **Shadcn/UI** - UI コンポーネントライブラリ
- **Radix UI** - アクセシブルなプリミティブコンポーネント

### バックエンド・データベース

- **Supabase** - BaaS（Backend as a Service）
- **PostgreSQL** - データベース
- **Prisma** - ORM（Object-Relational Mapping）
- **Zod** - スキーマ検証

### 開発・プロジェクト管理

- **TaskMaster AI** - AI 支援タスク管理・プロジェクト管理
- **Cursor IDE** - AI 統合開発環境
- **MCP (Model Context Protocol)** - TaskMaster と Cursor 間の連携
- **Playwright** - E2E テスト
- **ESLint** - コード品質チェック
- **Bun/npm** - パッケージ管理

## プロジェクトの特徴

### 1. AI 支援開発プロセス

#### TaskMaster 統合による効率化

**TaskMaster の役割:**

- **自動タスク生成**: PRD（要求仕様書）から実装可能なタスク群を自動生成
- **複雑度分析**: 各タスクの複雑度を分析し、適切な分解を提案
- **依存関係管理**: タスク間の依存関係を自動で管理・可視化
- **進捗追跡**: リアルタイムでの進捗状況把握と次のアクションの提案

**開発者の体験:**

```bash
# 1. 現在のプロジェクト状況を瞬時に把握
task-master list

# 2. AI による次の最適タスクの提案
task-master next

# 3. 複雑なタスクの自動分解
task-master expand --id=15 --research --force

# 4. 実装過程の詳細記録
task-master update-subtask --id=15.2 --prompt="実装詳細..."
```

#### 品質向上メカニズム

- **型安全性の徹底**: TypeScript + Zod による包括的な型チェック
- **AI 支援レビュー**: TaskMaster による実装パターンの分析と提案
- **継続的な知識蓄積**: 実装過程の詳細記録による組織学習の促進

### 2. 会計業務のデジタル化

- 仕訳入力・管理
- 勘定科目マスタ管理
- 補助科目管理
- 取引先マスタ管理
- 分析コード管理

### 3. 現代的なアーキテクチャとは何か？

**現代的なアーキテクチャ**とは、昔のシステム開発の問題を解決するために生まれた設計手法です。

#### 昔のシステムの問題点

- **スパゲッティコード**: すべてのコードが絡み合っていて、修正すると予期せぬところでバグが発生
- **テストが困難**: コードが密結合していて、部分的なテストができない
- **機能追加が困難**: 新機能を追加するたびに既存コードを大幅に修正する必要がある
- **属人的な開発**: 特定の開発者に依存し、引き継ぎが困難

#### 現代的なアーキテクチャの解決策

**レイヤードアーキテクチャ（4 層構造）**

```
プレゼンテーション層 ← ユーザーが見る画面
     ↓
アプリケーション層 ← 業務の流れを制御
     ↓
ドメイン層 ← ビジネスルールを定義
     ↓
インフラ層 ← データベースとの接続
```

**Repository パターン**

- データベースへのアクセス方法を統一化
- 「勘定科目を取得する」という処理を、データベースの詳細を知らなくても使える

**Service 層によるビジネスロジック分離**

- 「新しい勘定科目を作成する」などの業務ロジックを独立させる
- 画面から独立しているので、API でも Web 画面でも同じロジックを使える

**型安全性**

- TypeScript により、間違ったデータ型を使うとコンパイル時にエラーになる
- 実行前にバグを発見できる

### 4. スケーラブルな設計とは何か？

**スケーラブル**とは、システムが成長しても対応できる設計のことです。

#### 具体的な成長パターンと対策

**ユーザー数の増加**

- **問題**: 1,000 人のユーザーが同時にアクセスしたらシステムが重くなる
- **対策**: キャッシュ機能、データベース最適化、サーバー増設が容易な設計

**機能の追加**

- **問題**: 新しい帳票機能を追加したいが、既存コードを壊しそう
- **対策**: モジュラー構造により、新機能を独立したモジュールとして追加

**開発チームの拡大**

- **問題**: 10 人の開発者が同じコードを同時に修正すると競合する
- **対策**: 依存性注入パターンにより、各開発者が独立した部分を担当可能

**データ量の増加**

- **問題**: 100 万件の仕訳データで検索が遅くなる
- **対策**: 効率的なデータアクセスパターン、インデックス最適化

#### 実装されている具体的な仕組み

**モジュラー構造による保守性**

```typescript
// 勘定科目サービスは独立しており、他の機能に影響しない
export class AccountService {
  // 勘定科目に関する処理のみを担当
}

// 取引先サービスも独立
export class PartnerService {
  // 取引先に関する処理のみを担当
}
```

**依存性注入パターン**

```typescript
// サービスは具体的なデータベースを知らない
class AccountService {
  constructor(private repository: IAccountRepository) {
    // インターフェースのみに依存
  }
}
```

**テスト可能な設計**

```typescript
// モックを使って単体テストが可能
const mockRepository = new MockAccountRepository();
const service = new AccountService(mockRepository);
// サービス単体でテストできる
```

### 5. 個人開発に最適化されたシンプル設計

最新のアーキテクチャでは、個人開発の効率性を重視して以下の簡素化を実現しました：

#### 3 層構造による明確な責務分離

- **UI 層**: Next.js 15 と React 19 によるモダンなフロントエンド
- **ビジネスロジック層**: Server Actions による直接的なデータ操作
- **データ層**: Prisma による型安全なデータベースアクセス

#### 統一型システム

- **改善前**: 複数の ORM 間での型変換が複雑
- **改善後**: Prisma 型をベースとした完全統一によりメンテナンス性向上

#### 直接的なデータフロー

- **改善前**: 複数の抽象化層を経由した複雑なデータフロー
- **改善後**: UI → Server Actions → Database の明確で追跡しやすいフロー

#### 開発速度の向上

- **改善前**: 多層アーキテクチャによる実装コストの増大
- **改善後**: 必要最小限の構造による迅速な機能開発

#### AI 支援による開発効率化

- **TaskMaster 統合**: 手動タスク管理から自動化されたワークフローへ
- **実装パターンの学習**: 過去の実装過程から最適解を提案
- **品質の一貫性**: AI 支援によるコード品質の自動維持

## ディレクトリ構造の概要

```
biz-clone/
├── .taskmaster/          # TaskMaster設定・タスク管理
│   ├── config.json      # AI モデル設定
│   ├── tasks/           # タスクファイル群
│   ├── docs/            # プロジェクト設計ドキュメント
│   └── reports/         # 複雑度分析レポート
├── app/                  # Next.js App Router (ページ・レイアウト・Server Actions)
│   ├── actions/         # Server Actions (データ操作)
│   ├── master/          # マスタデータ管理画面
│   └── siwake/          # 仕訳関連画面
├── components/          # 再利用可能なUIコンポーネント
│   ├── accounting/      # 会計業務特化コンポーネント
│   └── ui/              # 基本UIコンポーネント (Shadcn/UI)
├── lib/                 # ユーティリティ・データベース層
│   ├── database/        # Prismaクライアント・データベースサービス
│   ├── schemas/         # Zodバリデーションスキーマ
│   └── utils/           # ユーティリティ関数
├── prisma/              # データベーススキーマ・マイグレーション
├── types/               # 統一TypeScript型定義
└── __tests__/           # テストファイル
```

**簡素化のポイント**: 複雑な抽象化層を削除し、必要最小限の構造で高い開発効率を実現

## 対象ユーザー

- **中小企業の経理担当者**
- **会計事務所**
- **個人事業主**

基本的な複式簿記の知識を持つユーザーを想定し、直感的で使いやすいインターフェースを提供します。

## TaskMaster 統合開発の利点

### 1. 開発プロセスの自動化

**従来の手動プロセス:**

```
要件 → 手動でタスク作成 → 手動で優先度設定 → 手動で進捗管理
```

**TaskMaster 統合プロセス:**

```
PRD → AI自動タスク生成 → 複雑度分析 → 最適な実装順序提案 → 自動進捗追跡
```

### 2. 品質の一貫性

- **コードパターンの統一**: 過去の実装から学習した最適パターンの提案
- **バグ削減**: 型安全性と AI 支援レビューによる早期発見
- **ドキュメント同期**: 実装とドキュメントの自動整合性維持

### 3. 学習効果

- **実装過程の記録**: 各サブタスクに詳細な実装ログを蓄積
- **知識の再利用**: 過去の実装経験を新しいタスクに活用
- **継続的改善**: パターンの分析による開発手法の進化

## なぜこのアーキテクチャを選んだのか？

### 個人開発における優先事項

1. **開発速度**: 迅速な機能実装とイテレーション → シンプルな構造 + AI 支援
2. **メンテナンス性**: 一人で保守可能な複雑さ → 必要最小限のレイヤー + 自動化
3. **型安全性**: バグの早期発見 → Prisma 統一型システム + AI 支援レビュー
4. **学習コスト**: 新しい技術の習得負荷を最小化 → 標準的な Next.js パターン + TaskMaster 統合

### 会計システムの特性への対応

1. **正確性が最重要**: 金額の計算ミス防止 → TypeScript + Zod バリデーション + AI 支援検証
2. **複雑なビジネスルール**: 複式簿記ルール → Server Actions 内での集約管理 + パターン学習
3. **長期間の運用**: データの長期保持 → Prisma による安定した DB 操作 + 自動メンテナンス
4. **監査対応**: データ整合性の証明 → トランザクション管理 + 変更履歴の自動記録

### AI 支援開発の利点

- **自動化されたワークフロー**: 手動タスク管理から解放
- **品質の自動維持**: パターンの学習による一貫した品質確保
- **知識の蓄積**: 実装過程の詳細記録による組織学習
- **効率的な意思決定**: データに基づく最適な実装順序の提案

### 簡素化アーキテクチャの利点

- **直接的なデータフロー**: UI → Server Actions → Database で追跡が容易
- **統一型システム**: 型変換の複雑さを排除し、開発効率を向上
- **Next.js 標準パターン**: フレームワークの思想に沿った自然な実装
- **テスト容易性**: シンプルな構造により単体テストが書きやすい
- **AI 統合の容易さ**: シンプルな構造により AI 支援の効果が最大化

## 開発ワークフローの進化

### Phase 1: 従来手法（〜2024 年）

- 手動でのタスク管理
- 経験に基づく開発
- 個人の記憶に依存した品質管理

### Phase 2: TaskMaster 統合（2025 年〜）

- AI 支援によるタスク自動生成・管理
- データ駆動型の開発プロセス
- 実装パターンの自動学習・適用
- 品質の自動維持・向上

## 次のドキュメント

- [02\_アーキテクチャ設計.md](./02_アーキテクチャ設計.md) - システム全体のアーキテクチャ
- [03\_データベース設計.md](./03_データベース設計.md) - データベーススキーマの詳細
- [04\_フロントエンド構造.md](./04_フロントエンド構造.md) - UI・画面構成
- [05\_バックエンド構造.md](./05_バックエンド構造.md) - サービス・リポジトリ層
- [06\_開発・テスト環境.md](./06_開発・テスト環境.md) - TaskMaster 統合開発環境

---

📝 **更新履歴**: 2025 年 1 月 21 日 - TaskMaster 統合による AI 支援開発手法導入
