# Biz Clone プロジェクト概要

## プロジェクトについて

**Biz Clone** は、現代的な技術スタックと **AI 支援開発手法**を使用して構築された**会計システム**です。  
企業の仕訳入力、勘定科目管理、取引先管理などの基本的な会計業務をデジタル化することを目的としています。

**本プロジェクトでは [TaskMaster AI](https://github.com/taskmaster-ai/taskmaster) を活用した AI 支援開発を実践しており、効率的なタスク管理と品質向上を実現しています。**

## 技術スタック

### フロントエンド

- **Next.js 15.3.3** - React 基盤のフルスタックフレームワーク
- **React 19** - ユーザーインターフェース構築
- **TypeScript** - 型安全な開発
- **Tailwind CSS** - スタイリング
- **Shadcn/UI** - UI コンポーネントライブラリ
- **Radix UI** - アクセシブルなプリミティブコンポーネント
- **React Hook Form** - フォーム管理
- **Zod** - クライアントサイドバリデーション

### バックエンド・データベース

- **Server Actions** - Next.js 15 のサーバーサイド処理
- **PostgreSQL** - データベース
- **Prisma** - ORM（Object-Relational Mapping）
- **Zod** - サーバーサイドバリデーション

### 開発・プロジェクト管理

- **TaskMaster AI** - AI 支援タスク管理・プロジェクト管理
- **Cursor IDE** - AI 統合開発環境
- **MCP (Model Context Protocol)** - TaskMaster と Cursor 間の連携
- **Playwright** - E2E テスト
- **ESLint** - コード品質チェック
- **Bun/npm** - パッケージ管理

## プロジェクトの特徴

### 1. AI 支援開発プロセス

#### TaskMaster 統合による効率化

**TaskMaster の役割:**

- **自動タスク生成**: PRD（要求仕様書）から実装可能なタスク群を自動生成
- **複雑度分析**: 各タスクの複雑度を分析し、適切な分解を提案
- **依存関係管理**: タスク間の依存関係を自動で管理・可視化
- **進捗追跡**: リアルタイムでの進捗状況把握と次のアクションの提案

**開発者の体験:**

```bash
# 1. 現在のプロジェクト状況を瞬時に把握
task-master list

# 2. AI による次の最適タスクの提案
task-master next

# 3. 複雑なタスクの自動分解
task-master expand --id=15 --research --force

# 4. 実装過程の詳細記録
task-master update-subtask --id=15.2 --prompt="実装詳細..."
```

#### 品質向上メカニズム

- **型安全性の徹底**: TypeScript + Zod による包括的な型チェック
- **AI 支援レビュー**: TaskMaster による実装パターンの分析と提案
- **継続的な知識蓄積**: 実装過程の詳細記録による組織学習の促進

### 2. 会計業務のデジタル化

- 仕訳入力・管理
- 勘定科目マスタ管理
- 補助科目管理
- 取引先マスタ管理
- 分析コード管理

### 3. 現代的なアーキテクチャ

**現代的なアーキテクチャ**とは、従来のシステム開発の問題を解決するために生まれた設計手法です。

#### 従来システムの問題点

- **スパゲッティコード**: すべてのコードが絡み合っていて、修正すると予期せぬところでバグが発生
- **テストが困難**: コードが密結合していて、部分的なテストができない
- **機能追加が困難**: 新機能を追加するたびに既存コードを大幅に修正する必要がある
- **属人的な開発**: 特定の開発者に依存し、引き継ぎが困難

#### 現代的なアーキテクチャの解決策

**3 層構造による明確な責務分離:**

```
UI層 (Next.js + React 19)
 ↓
Server Actions層 (ビジネスロジック)
 ↓
Database層 (Prisma + PostgreSQL)
```

**直接的なデータフロー:**

- **改善前**: 複数の抽象化層を経由した複雑なデータフロー
- **改善後**: UI → Server Actions → Database の明確で追跡しやすいフロー

**統一型システム:**

- **改善前**: 複数の ORM 間での型変換が複雑
- **改善後**: Prisma 型をベースとした完全統一によりメンテナンス性向上

**型安全性:**

- TypeScript により、間違ったデータ型を使うとコンパイル時にエラーになる
- 実行前にバグを発見できる

### 4. スケーラブルな設計

**スケーラブル**とは、システムが成長しても対応できる設計のことです。

#### 具体的な成長パターンと対策

**ユーザー数の増加**

- **問題**: 1,000 人のユーザーが同時にアクセスしたらシステムが重くなる
- **対策**: Server Actions によるサーバーサイド処理、データベース最適化

**機能の追加**

- **問題**: 新しい帳票機能を追加したいが、既存コードを壊しそう
- **対策**: モジュラー構造により、新機能を独立したモジュールとして追加

**開発チームの拡大**

- **問題**: 複数の開発者が同じコードを同時に修正すると競合する
- **対策**: TaskMaster によるタスク管理と明確な責務分離

**データ量の増加**

- **問題**: 100 万件の仕訳データで検索が遅くなる
- **対策**: Prisma による効率的なデータアクセスパターン、インデックス最適化

#### 実装されている具体的な仕組み

**モジュラー構造による保守性**

```typescript
// 勘定科目に関する処理は独立したServer Actionで実装
export async function createAccount(data: CreateAccountSchema) {
  // 勘定科目作成のビジネスロジック
}

// 取引先に関する処理も独立
export async function createPartner(data: CreatePartnerSchema) {
  // 取引先作成のビジネスロジック
}
```

**統一された型システム**

```typescript
// Prismaモデルを基盤とした型の統一
export type Account = Prisma.AccountGetPayload<{
  include: { subAccounts: true };
}>;

// すべてのコンポーネントで同一の型を使用
```

**テスト可能な設計**

```typescript
// Server Actions は独立してテスト可能
test("勘定科目作成のバリデーション", async () => {
  const result = await createAccount(invalidData);
  expect(result.success).toBe(false);
});
```

### 5. 個人開発に最適化されたシンプル設計

最新のアーキテクチャでは、個人開発の効率性を重視して以下の簡素化を実現しました：

#### 3 層構造による明確な責務分離

- **UI 層**: Next.js 15 と React 19 によるモダンなフロントエンド
- **ビジネスロジック層**: Server Actions による直接的なデータ操作
- **データ層**: Prisma による型安全なデータベースアクセス

#### 統一型システム

- **改善前**: 複数の ORM 間での型変換が複雑
- **改善後**: Prisma 型をベースとした完全統一によりメンテナンス性向上

#### 直接的なデータフロー

- **改善前**: 複数の抽象化層を経由した複雑なデータフロー
- **改善後**: UI → Server Actions → Database の明確で追跡しやすいフロー

#### AI 支援による効率化

- **TaskMaster 統合**: 実装タスクの自動生成と管理
- **複雑度分析**: タスクの適切な分解レベルの提案
- **継続的な学習**: 実装過程の記録による知識蓄積

## 開発ワークフローの進化

### Phase 1: 従来の開発手法

```
要件定義 → 設計 → 実装 → テスト → デプロイ
```

**課題:**

- 要件の変更に柔軟に対応できない
- 複雑なタスクの見積もりが困難
- 実装知識の属人化

### Phase 2: TaskMaster 統合開発（現在）

```
PRD解析 → AI自動タスク生成 → 複雑度分析 → 実装+記録 → 継続的改善
```

**改善点:**

- **自動化**: 要求仕様からタスクへの変換が自動化
- **可視化**: 複雑度と依存関係の明確な把握
- **知識蓄積**: 実装過程の詳細記録による学習効果
- **品質向上**: AI 支援によるパターン分析と改善提案

## 主要機能

### 1. 仕訳管理システム

- **仕訳作成**: 複式簿記に基づく正確な仕訳入力
- **仕訳照会**: 既存仕訳の表示・編集・削除
- **仕訳検索**: 条件指定による柔軟な検索機能
- **バリデーション**: 貸借バランスチェック等の自動検証

### 2. マスタ管理システム

- **勘定科目マスタ**: 階層構造対応の科目管理
- **取引先マスタ**: 得意先・仕入先等の管理
- **補助科目マスタ**: 勘定科目の詳細分類
- **分析コードマスタ**: 部門・プロジェクト等の管理会計軸

### 3. レスポンシブ UI

- **モバイル対応**: スマートフォンでの操作性
- **タブレット対応**: 中型画面での最適表示
- **デスクトップ**: 大画面での効率的な操作

### 4. 堅牢性・セキュリティ

- **型安全性**: TypeScript による包括的な型チェック
- **入力検証**: Zod による厳格なバリデーション
- **データ整合性**: PostgreSQL の ACID 特性を活用

## 技術選定の理由

### Next.js 15.3.3 + React 19

- **Server Actions**: サーバーサイド処理の簡素化
- **App Router**: ファイルベースの直感的なルーティング
- **最新機能**: React 19 の並行機能を活用

### TypeScript + Zod

- **開発時型チェック**: TypeScript による静的解析
- **実行時バリデーション**: Zod による動的検証
- **完全な型安全性**: フロントエンドからバックエンドまで一貫した型

### Prisma + PostgreSQL

- **型安全な ORM**: データベース操作の型チェック
- **マイグレーション**: スキーマ変更の自動管理
- **パフォーマンス**: 効率的なクエリ生成

### TaskMaster AI 統合

- **効率的なタスク管理**: 手動タスク作成からの脱却
- **品質向上**: AI による分析と改善提案
- **知識の蓄積**: 実装ノウハウの組織的な蓄積

## プロジェクト目標

### 短期目標（3 ヶ月）

- [ ] 基本的な仕訳機能の完成
- [ ] マスタ管理機能の実装
- [ ] 基本的な UI/UX の確立
- [ ] TaskMaster 統合開発の定着

### 中期目標（6 ヶ月）

- [ ] 帳票出力機能の実装
- [ ] パフォーマンス最適化
- [ ] セキュリティ強化
- [ ] テストカバレッジ 90%以上

### 長期目標（1 年）

- [ ] クラウド環境でのサービス提供
- [ ] 多社対応機能
- [ ] AI 機能の拡張（自動仕訳推測等）
- [ ] モバイルアプリ対応

## 成功指標

### 開発効率

- **タスク完了率**: 90%以上の予定通り完了
- **バグ発生率**: リリース後 1 週間以内の重要バグ 0 件
- **開発スピード**: 機能単位での開発時間 20%短縮

### 品質指標

- **型安全性**: TypeScript エラー 0 件の維持
- **テストカバレッジ**: 90%以上の維持
- **パフォーマンス**: 2 秒以内のページ読み込み

### AI 支援効果

- **タスク分解精度**: 手動修正が不要なタスクが 80%以上
- **実装記録品質**: 将来の類似実装で参考になる記録の蓄積
- **学習効果**: 同種の実装における工数短縮の実現

## リスクと対策

### 技術リスク

- **新技術の習得コスト**: TaskMaster 統合による学習効率向上で対策
- **TypeScript 複雑化**: Prisma 基盤の統一型システムで対策

### プロジェクトリスク

- **要件変更**: TaskMaster の柔軟なタスク管理で対策
- **品質低下**: AI 支援レビューと継続的テストで対策

### 運用リスク

- **パフォーマンス**: 事前のボトルネック分析と最適化
- **セキュリティ**: 設計段階からのセキュリティ考慮

## 今後の展望

### AI 支援開発の発展

- **より高度な分析**: 実装パターンの自動学習と提案
- **予測機能**: プロジェクト完了時期の精密な予測
- **自動化拡張**: コード生成とテスト自動作成

### 技術スタックの進化

- **Next.js**: 新機能の継続的な採用
- **React**: エコシステムの拡張
- **AI 技術**: より高度な開発支援ツールの統合

### ビジネス展開

- **SaaS 化**: クラウドサービスとしての提供
- **多言語対応**: グローバル展開の準備
- **業界特化**: 特定業界向けカスタマイズ

---

このプロジェクト概要は living document として、開発の進行に伴い継続的に更新されます。TaskMaster による効率的なタスク管理により、常に最新の状況が反映されています。
